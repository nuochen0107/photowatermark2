# PhotoWatermark2 产品需求文档 (PRD)

## 1. 产品概述

PhotoWatermark2 是一个本地水印应用程序，支持 Windows平台。该应用程序允许用户为图片添加文本或图片水印，提供丰富的自定义选项和批量处理功能。

## 2. 功能需求

### 2.1 文件处理

#### 2.1.1 导入图片
- **单张导入**
  - 支持拖拽导入单张图片
  - 支持通过文件选择器选择单张图片
- **批量导入**
  - 支持一次性选择多张图片
  - 支持导入整个文件夹
- **图片列表显示**
  - 显示缩略图
  - 显示文件名
  - 支持列表中图片的选择和预览

#### 2.1.2 支持格式
- **输入格式**
  - 必需格式：
    - JPEG
    - PNG（支持透明通道）
  - 建议支持格式：
    - BMP
    - TIFF
- **输出格式**
  - JPEG
  - PNG
  - 用户可自由选择输出格式

#### 2.1.3 导出图片
- **输出位置**
  - 用户可指定输出文件夹
  - 默认禁止导出到原文件夹，防止覆盖原图
- **文件命名规则**
  - 保留原文件名
  - 支持添加自定义前缀（如 wm_）
  - 支持添加自定义后缀（如 _watermarked）
- **高级导出选项**（可选功能）
  - JPEG 质量调节（0-100 滑块）
  - 图片尺寸调整
    - 按宽度调整
    - 按高度调整
    - 按百分比缩放

### 2.2 水印类型

#### 2.2.1 文本水印
- **基本功能**
  - 自定义文本输入
  - 透明度调节（0-100%）
- **高级功能**（可选）
  - 字体设置
    - 选择系统已安装字体
    - 字号调整
    - 粗体选项
    - 斜体选项
  - 颜色选择（调色板）
  - 样式效果
    - 文字阴影
    - 文字描边

#### 2.2.2 图片水印（可选功能）
- **图片选择**
  - 支持本地图片选择
  - 支持 PNG 格式（含透明通道）
- **水印调整**
  - 比例缩放
  - 自由调整大小
  - 透明度调节（0-100%）

### 2.3 水印布局与样式

#### 2.3.1 实时预览
- 水印调整实时显示
- 支持在图片列表中切换预览

#### 2.3.2 位置调整
- **预设位置**
  - 九宫格布局选项
    - 四角位置
    - 正中心位置
  - 一键定位功能
- **手动调整**
  - 鼠标拖拽定位
  - 支持任意位置放置

#### 2.3.3 旋转功能（可选功能）
- 通过滑块调节旋转角度
- 支持输入具体角度数值

### 2.4 配置管理

#### 2.4.1 水印模板
- **模板保存**
  - 保存当前所有水印设置
    - 水印内容
    - 字体设置
    - 颜色设置
    - 位置信息
    - 大小参数
    - 透明度数值
- **模板管理**
  - 加载已保存模板
  - 删除模板
  - 编辑模板
- **启动设置**
  - 自动加载上次设置
  - 支持设置默认模板

## 3. 技术要求

### 3.1 开发平台
- 支持 Windows 或 MacOS 平台
- 提供可直接运行的发布版本

### 3.2 代码管理
- 在 GitHub 上进行版本控制
- 保持详细的提交记录
- 提供 Release 版本下载

### 3.3 性能要求
- 图片处理响应及时
- 实时预览流畅
- 批量处理高效

## 4. 交付标准

### 4.1 必需功能
- 基本的文件导入导出
- 文本水印基本功能
- 水印位置调整
- 基本的模板管理

### 4.2 可选功能
- 高级文本样式
- 图片水印支持
- 旋转功能
- 高级导出选项

### 4.3 文档要求
- 完整的使用说明
- 开发文档
- API 文档（如适用）

### 4.4 发布要求
- GitHub 仓库维护
- 定期 Release 更新
- 版本更新日志